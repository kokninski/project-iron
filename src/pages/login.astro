---
import Layout from '../layouts/Layout.astro';

let error = '';
if (Astro.request.method === 'POST') {
  const formData = await Astro.request.formData();
  const username = formData.get('username');
  const password = formData.get('password');
  // Example credentials: user / pass
  if (username === 'user' && password === 'pass') {
    Astro.cookies.set('auth', 'true', { path: '/', httpOnly: true });
    return Astro.redirect('/private');
  } else {
    error = 'Invalid credentials';
  }
}
---

<Layout>
  <h1>Login</h1>
  {error && <p style="color:red">{error}</p>}
  <form method="POST">
    <label>
      Username:
      <input name="username" type="text" required />
    </label>
    <br />
    <label>
      Password:
      <input name="password" type="password" required />
    </label>
    <br />
    <button type="submit">Login</button>
  </form>
</Layout>
