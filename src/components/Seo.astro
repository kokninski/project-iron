---
// Reusable SEO Component
// Import this component in any page that needs custom SEO

import type { SEOProps } from '../layouts/BaseLayout.astro';

interface Props extends SEOProps {
  // Additional props specific to the SEO component
}

const {
  title,
  description,
  ogImage,
  ogImageAlt,
  canonical,
  noindex = false,
  type = 'website',
  locale = 'pl_PL',
  siteName = 'Project Iron',
  author = 'Project Iron Team',
  publishedTime,
  modifiedTime,
} = Astro.props;

// Generate canonical URL
const currentUrl = new URL(Astro.url.pathname, Astro.site);
const canonicalUrl = canonical || currentUrl.href;

// Generate full OG image URL
const fullOgImage = ogImage
  ? new URL(ogImage, Astro.site).href
  : new URL('/og-default.jpg', Astro.site).href;
---

<!-- This fragment will be injected into the head -->
<Fragment>
  {title && <title>{title}</title>}
  {description && <meta name="description" content={description} />}
  {canonicalUrl && <link rel="canonical" href={canonicalUrl} />}

  {noindex && <meta name="robots" content="noindex, nofollow" />}

  <!-- Open Graph -->
  <meta property="og:type" content={type} />
  <meta property="og:url" content={canonicalUrl} />
  {title && <meta property="og:title" content={title} />}
  {description && <meta property="og:description" content={description} />}
  <meta property="og:image" content={fullOgImage} />
  {ogImageAlt && <meta property="og:image:alt" content={ogImageAlt} />}
  <meta property="og:locale" content={locale} />
  {siteName && <meta property="og:site_name" content={siteName} />}

  {publishedTime && <meta property="article:published_time" content={publishedTime} />}
  {modifiedTime && <meta property="article:modified_time" content={modifiedTime} />}

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content={canonicalUrl} />
  {title && <meta name="twitter:title" content={title} />}
  {description && <meta name="twitter:description" content={description} />}
  <meta name="twitter:image" content={fullOgImage} />
  {ogImageAlt && <meta name="twitter:image:alt" content={ogImageAlt} />}
</Fragment>
